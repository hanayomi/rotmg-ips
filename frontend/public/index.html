<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realm of the Mad God Server IP Tool</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/script.js" defer></script>
</head>

<body>
    <header class="pixel-header">
        <h1 class="pixel-title">069 Homestock</h1>
        <div class="search-container">
            <input type="text" id="search-bar" placeholder="Search for servers or realms (e.g., USW, USWest3 Harpy)" oninput="filterServers()" />
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav class="navbar">
        <ul>
            <li><a href="#us-servers">US Servers</a></li>
            <li><a href="#eu-servers">EU Servers</a></li>
            <li><a href="#global-servers">Global Servers</a></li>
        </ul>
    </nav>

    <main class="container">
        <!-- US Servers Section -->
        <section id="us-servers" class="server-list">
            <h2>US Servers</h2>
            <div id="us-server-group" class="server-group"></div>
        </section>

        <!-- EU Servers Section -->
        <section id="eu-servers" class="server-list">
            <h2>EU Servers</h2>
            <div id="eu-server-group" class="server-group"></div>
        </section>

        <!-- Global Servers Section -->
        <section id="global-servers" class="server-list">
            <h2>Global Servers</h2>
            <div id="global-server-group" class="server-group"></div>
        </section>
    </main>

    <footer>
        <p>darling // s/o update</p>
        <p>lover on top</a>.</p>
    </footer>

    <!-- Notification for IP copy -->
    <div id="notification" class="hidden">IP copied to clipboard!</div>

    <script>
        // Data structure holding all servers and their IPs
        const servers = {
            "USEast": {
                nexus: "54.234.226.24",
                betaRealms: {
                    "[BETA] #1": "54.209.152.223",
                    "[BETA] #2": "54.196.48.20"
                },
                oldRealm: {
                    "Old Realm #1": "54.144.164.168"
                }
            },
            "USWest": {
                nexus: "54.86.47.176",
                betaRealms: {
                    "[BETA] #1": "52.55.11.175",
                    "[BETA] #2": "54.165.81.87"
                },
                oldRealm: {
                    "Old Realm #1": "54.165.81.87"
                }
            },
            "EUWest": {
                nexus: "15.237.60.223",
                betaRealms: {
                    "[BETA] #1": "15.188.239.201",
                    "[BETA] #2": "35.181.56.245"
                },
                oldRealm: {
                    "Old Realm #1": "35.180.207.199"
                }
            },
            "Australia": {
                nexus: "54.79.72.84",
                betaRealms: {
                    "[BETA] #1": "13.211.79.144",
                    "[BETA] #2": "3.25.164.73"
                },
                oldRealm: {
                    "Old Realm #1": "3.25.164.73"
                }
            },
            // More servers can be added here
        };

        // Function to render all servers dynamically on the page
        function renderServers() {
            const usServerGroup = document.getElementById('us-server-group');
            const euServerGroup = document.getElementById('eu-server-group');
            const globalServerGroup = document.getElementById('global-server-group');

            Object.keys(servers).forEach(serverName => {
                const serverData = servers[serverName];
                const clusterDiv = createServerCluster(serverName, serverData);

                if (serverName.startsWith('US')) {
                    usServerGroup.appendChild(clusterDiv);
                } else if (serverName.startsWith('EU')) {
                    euServerGroup.appendChild(clusterDiv);
                } else {
                    globalServerGroup.appendChild(clusterDiv);
                }
            });
        }

        // Helper function to create a server cluster div element
        function createServerCluster(serverName, serverData) {
            const clusterDiv = document.createElement('div');
            clusterDiv.classList.add('server-cluster');
            
            const h4 = document.createElement('h4');
            h4.textContent = serverName;
            clusterDiv.appendChild(h4);

            // Nexus button
            const nexusBtn = createRealmButton('Nexus', serverData.nexus);
            clusterDiv.appendChild(nexusBtn);

            // Beta Realms
            Object.keys(serverData.betaRealms).forEach(betaRealm => {
                const betaBtn = createRealmButton(betaRealm, serverData.betaRealms[betaRealm]);
                clusterDiv.appendChild(betaBtn);
            });

            // Old Realm
            Object.keys(serverData.oldRealm).forEach(oldRealm => {
                const oldRealmBtn = createRealmButton(oldRealm, serverData.oldRealm[oldRealm]);
                clusterDiv.appendChild(oldRealmBtn);
            });

            return clusterDiv;
        }

        // Helper function to create a button for a realm with its IP
        function createRealmButton(realmName, ip) {
            const button = document.createElement('button');
            button.classList.add('copy-btn');
            button.textContent = realmName;
            button.setAttribute('data-ip', ip);
            button.onclick = () => copyToClipboard(ip);
            return button;
        }

        // Copy IP to clipboard and show a success message
        function copyToClipboard(ip) {
            navigator.clipboard.writeText(ip).then(() => {
                showNotification(`IP ${ip} copied to clipboard!`);
            });
        }

        // Show notification after copying IP
        function showNotification(message) {
            const notification = document.getElementById("notification");
            notification.textContent = message;
            notification.classList.add("show");
            setTimeout(() => {
                notification.classList.remove("show");
            }, 2000);
        }

        // Enhanced search functionality
        function filterServers() {
            const searchQuery = document.getElementById("search-bar").value.toLowerCase();
            const serverClusters = document.querySelectorAll(".server-cluster");

            serverClusters.forEach(cluster => {
                const serverName = cluster.querySelector("h4").textContent.toLowerCase();
                const buttons = cluster.querySelectorAll("button");
                let found = false;

                // Check if server name or any button matches the search query
                if (serverName.includes(searchQuery)) {
                    found = true;
                }

                buttons.forEach(button => {
                    if (button.textContent.toLowerCase().includes(searchQuery)) {
                        found = true;
                        if (searchQuery && button.getAttribute('data-ip')) {
                            copyToClipboard(button.getAttribute('data-ip'));
                        }
                    }
                });

                cluster.style.display = found ? "block" : "none";
            });
        }

        // Initial rendering of all servers
        renderServers();
    </script>

</body>

</html>
